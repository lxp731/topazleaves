<!DOCTYPE HTML>
<html lang="zh-cn" class="rust" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Topaz Leaves</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('rust')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Topaz Leaves</li><li class="chapter-item expanded "><a href="google_input_install.html"><strong aria-hidden="true">1.</strong> 下载谷歌拼音</a></li><li class="chapter-item expanded "><a href="wechat_install.html"><strong aria-hidden="true">2.</strong> 下载微信</a></li><li class="chapter-item expanded "><a href="clash_verge_install.html"><strong aria-hidden="true">3.</strong> 下载 Clash-Verge</a></li><li class="chapter-item expanded "><a href="docker_install.html"><strong aria-hidden="true">4.</strong> 下载 Docker</a></li><li class="chapter-item expanded "><a href="pycharm_crack.html"><strong aria-hidden="true">5.</strong> 破解 Pycharm</a></li><li class="chapter-item expanded "><a href="env_variable_setting.html"><strong aria-hidden="true">6.</strong> 环境变量设置</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="bashrc_setting.html"><strong aria-hidden="true">6.1.</strong> .bashrc</a></li><li class="chapter-item expanded "><a href="vimrc_setting.html"><strong aria-hidden="true">6.2.</strong> .vimrc</a></li><li class="chapter-item expanded "><a href="user-dirs.dirs_setting.html"><strong aria-hidden="true">6.3.</strong> .user-dirs.dirs</a></li></ol></li><li class="chapter-item expanded "><a href="kinds_proxy_setting.html"><strong aria-hidden="true">7.</strong> 代理配置</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="system_proxy_setting.html"><strong aria-hidden="true">7.1.</strong> 配置系统代理</a></li><li class="chapter-item expanded "><a href="docker_proxy_setting.html"><strong aria-hidden="true">7.2.</strong> 配置 Docker 代理</a></li><li class="chapter-item expanded "><a href="container_proxy_setting.html"><strong aria-hidden="true">7.3.</strong> 配置容器代理</a></li><li class="chapter-item expanded "><a href="k3s_proxy_setting.html"><strong aria-hidden="true">7.4.</strong> 配置 K3S 代理</a></li></ol></li><li class="chapter-item expanded "><a href="useful_scripts.html"><strong aria-hidden="true">8.</strong> 实用脚本</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_version_control.html"><strong aria-hidden="true">8.1.</strong> Node 版本控制</a></li><li class="chapter-item expanded "><a href="docker_proxy_start_stop.html"><strong aria-hidden="true">8.2.</strong> Docker 代理启停</a></li><li class="chapter-item expanded "><a href="docker_push_registry.html"><strong aria-hidden="true">8.3.</strong> Docker 镜像上传私有仓库</a></li></ol></li><li class="chapter-item expanded "><a href="disable_sleep.html"><strong aria-hidden="true">9.</strong> 关闭盖子禁用休眠</a></li><li class="chapter-item expanded "><a href="windterm_desktop.html"><strong aria-hidden="true">10.</strong> WindTerm 桌面图标</a></li><li class="chapter-item expanded "><a href="frp_usage.html"><strong aria-hidden="true">11.</strong> frp 内网穿透</a></li><li class="chapter-item expanded "><a href="asciiquarium_usage.html"><strong aria-hidden="true">12.</strong> asciiquarium 终端动画</a></li><li class="chapter-item expanded "><a href="kns_usage.html"><strong aria-hidden="true">13.</strong> kns 命名空间锁定</a></li><li class="chapter-item expanded "><a href="vscode_remote_usage.html"><strong aria-hidden="true">14.</strong> VS-Code 远程连接主机</a></li><li class="chapter-item expanded "><a href="ollama_services_found.html"><strong aria-hidden="true">15.</strong> Ollama 服务发现</a></li><li class="chapter-item expanded "><a href="funny_docker_projects.html"><strong aria-hidden="true">16.</strong> 有趣的 Docker 项目</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="openweb-ui.html"><strong aria-hidden="true">16.1.</strong> Openweb-UI</a></li><li class="chapter-item expanded "><a href="yesplaymusic.html"><strong aria-hidden="true">16.2.</strong> Yesplaymusic</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Topaz Leaves</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/lxp731/topazleaves.git" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="下载-google-pinyin"><a class="header" href="#下载-google-pinyin">下载 Google-PinYin</a></h1>
<h3 id="在ubuntu-下谷歌拼音输入法是基于fcitx输入法的因此首先安装fcitx"><a class="header" href="#在ubuntu-下谷歌拼音输入法是基于fcitx输入法的因此首先安装fcitx">在Ubuntu 下，谷歌拼音输入法是基于Fcitx输入法的。因此，首先安装Fcitx。</a></h3>
<pre><code class="language-bash">sudo apt install fcitx
</code></pre>
<h3 id="配置fcitx"><a class="header" href="#配置fcitx">配置Fcitx</a></h3>
<pre><code class="language-bash">im-config
</code></pre>
<h3 id="安装谷歌拼音输入法google-pinyin"><a class="header" href="#安装谷歌拼音输入法google-pinyin">安装谷歌拼音输入法（Google Pinyin）</a></h3>
<pre><code class="language-bash">sudo apt install fcitx-googlepinyin
</code></pre>
<h3 id="安装后运行如下命令配置谷歌拼音输入法"><a class="header" href="#安装后运行如下命令配置谷歌拼音输入法">安装后运行如下命令配置谷歌拼音输入法</a></h3>
<pre><code class="language-bash">fcitx-config-gtk3
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wechat-install"><a class="header" href="#wechat-install">Wechat Install</a></h1>
<h4 id="安装-deepin-repository"><a class="header" href="#安装-deepin-repository">安装 Deepin Repository</a></h4>
<pre><code class="language-bash">wget -O- https://deepin-wine.i-m.dev/setup.sh | sh
</code></pre>
<h4 id="安装微信"><a class="header" href="#安装微信">安装微信</a></h4>
<pre><code class="language-bash">sudo apt install com.qq.weixin.deepin
</code></pre>
<h4 id="解决统信应用解压失败的问题"><a class="header" href="#解决统信应用解压失败的问题">解决统信应用解压失败的问题</a></h4>
<pre><code class="language-bash">sudo vim /opt/deepinwine/tools/run_v4.sh

# 找到下面这一行
7z x "$APPDIR/$APPTAR" -o"$1"
# 替换为
7z x "$APPDIR/$APPTAR" -o"$1" || true
</code></pre>
<h4 ignore="ture">卸载微信</h4>
<pre><code class="language-bash">sudo apt remove com.qq.weixin.deepin
</code></pre>
<h4 ignore="ture">删除 Deepin Repository</h4>
<pre><code class="language-bash">sudo rm /etc/apt/sources.d.list/deepin-wine.i-m.dev.list
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="下载-clash-verge"><a class="header" href="#下载-clash-verge">下载 Clash-Verge</a></h1>
<h4 id="clash-verge项目地址"><a class="header" href="#clash-verge项目地址">clash-verge项目地址</a></h4>
<p><a href="https://github.com/clash-verge-rev/clash-verge-rev">https://github.com/clash-verge-rev/clash-verge-rev</a></p>
<h4 id="解决clash-verge-依赖于-libwebkit2gtk-40-37问题"><a class="header" href="#解决clash-verge-依赖于-libwebkit2gtk-40-37问题">解决"clash-verge 依赖于 libwebkit2gtk-4.0-37."问题</a></h4>
<pre><code class="language-bash">sudo vim /etc/apt/sources.list.d/ubuntu.sources

# 添加以下内容
Types: deb
URIs: http://br.archive.ubuntu.com/ubuntu/
Suites: jammy
Components: main restricted universe multiverse
Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg

sudo apt update
</code></pre>
<h4 id="解决-clash-verge-启动不显示窗口的问题"><a class="header" href="#解决-clash-verge-启动不显示窗口的问题">解决 clash-verge 启动不显示窗口的问题</a></h4>
<pre><code>vim /usr/share/applications/clash-verge.desktop 

# 将 Exec 改为：
Exec=env WEBKIT_DISABLE_COMPOSITING_MODE=1 clash-verge
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="下载-docker"><a class="header" href="#下载-docker">下载 Docker</a></h1>
<h4 id="下载-docker-的官方gpg密钥"><a class="header" href="#下载-docker-的官方gpg密钥">下载 Docker 的官方GPG密钥：</a></h4>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc
</code></pre>
<h4 id="添加-docker-的官方仓库"><a class="header" href="#添加-docker-的官方仓库">添加 Docker 的官方仓库</a></h4>
<pre><code class="language-bash">echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre>
<h4 id="更新软件包列表"><a class="header" href="#更新软件包列表">更新软件包列表</a></h4>
<pre><code class="language-bash">sudo apt-get update
</code></pre>
<h4 id="下载-docker-1"><a class="header" href="#下载-docker-1">下载 Docker</a></h4>
<pre><code class="language-bash">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="破解-pycharm"><a class="header" href="#破解-pycharm">破解 Pycharm</a></h1>
<h4 id="编辑配置文件"><a class="header" href="#编辑配置文件">编辑配置文件</a></h4>
<pre><code class="language-bash">vim /pycharm/install/path/bin/pycharm64.vmoptions
</code></pre>
<h4 id="添加以下内容"><a class="header" href="#添加以下内容">添加以下内容</a></h4>
<pre><code class="language-bash">-javaagent:/jar-package/path/jetbra/ja-netfilter.jar=jetbrains
--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED
--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED
</code></pre>
<h4 id="激活码"><a class="header" href="#激活码">激活码</a></h4>
<pre><code class="language-bash">EUWT4EE9X2-eyJsaWNlbnNlSWQiOiJFVVdUNEVFOVgyIiwibGljZW5zZWVOYW1lIjoic2lnbnVwIHNjb290ZXIiLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJQU0kiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUFBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDV01QIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfV0sIm1ldGFkYXRhIjoiMDEyMDIyMDkwMlBTQU4wMDAwMDUiLCJoYXNoIjoiVFJJQUw6MzUzOTQ0NTE3IiwiZ3JhY2VQZXJpb2REYXlzIjo3LCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-FT9l1nyyF9EyNmlelrLP9rGtugZ6sEs3CkYIKqGgSi608LIamge623nLLjI8f6O4EdbCfjJcPXLxklUe1O/5ASO3JnbPFUBYUEebCWZPgPfIdjw7hfA1PsGUdw1SBvh4BEWCMVVJWVtc9ktE+gQ8ldugYjXs0s34xaWjjfolJn2V4f4lnnCv0pikF7Ig/Bsyd/8bsySBJ54Uy9dkEsBUFJzqYSfR7Z/xsrACGFgq96ZsifnAnnOvfGbRX8Q8IIu0zDbNh7smxOwrz2odmL72UaU51A5YaOcPSXRM9uyqCnSp/ENLzkQa/B9RNO+VA7kCsj3MlJWJp5Sotn5spyV+gA==-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668HeOnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79Lbu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU/Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8/COMrxRlZW5mfzo0xsK0dQGNH3UoG/9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBABqRoNGxAQct9dQUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//lOmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH/0onD
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="env-variable-setting"><a class="header" href="#env-variable-setting">ENV Variable Setting</a></h1>
<p>In Linux, environment variables are used to store information that can be used by programs when they are executed. They play a important role in Linux system.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bashrc-配置"><a class="header" href="#bashrc-配置">.bashrc 配置</a></h1>
<pre><code class="language-bash"># 设置shell命令查找
set -o vi

# 设置Ctrl+L清屏
bind -x '"\C-l":clear'

# helm complete
source &lt;(helm completion bash)
source &lt;(kubectl completion bash)

# alias kubectl &amp; setting completion
alias k=kubectl
complete -o default -F __start_kubectl k
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vimrc-配置"><a class="header" href="#vimrc-配置">.vimrc 配置</a></h1>
<pre><code class="language-bash">autocmd BufNewFile *.sh exec ":call AddTitleForShell()"
function  AddTitleForShell()
   call append(0,"#!/bin/bash")
   call append(1,"# **********************************************************")
   call append(2,"# * Author        : Burgess Leo")
   call append(3,"# * Email         : xiaoli@qiuqiu.com")
   call append(4,"# * Create time   : ".strftime("%Y-%m-%d %H:%M"))
   call append(5,"# * Filename      : ".expand("%:t"))
   call append(6,"# * Description   : ")
   call append(7,"# **********************************************************")
endfunction

"默认显示行号
set nu

"默认显示当前光标所在行
"set cursorline

"可以使用鼠标改变位置
set mouse=a

"设置字典
set dictionary+=/usr/share/dict/words 
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="user-dirsdirs-文件修改"><a class="header" href="#user-dirsdirs-文件修改">.user-dirs.dirs 文件修改</a></h1>
<h4 id="修改文件内容"><a class="header" href="#修改文件内容">修改文件内容</a></h4>
<pre><code class="language-bash">XDG_DESKTOP_DIR="$HOME/desktop"
XDG_DOCUMENTS_DIR="$HOME/document"
XDG_DOWNLOAD_DIR="$HOME/download"
XDG_MUSIC_DIR="$HOME/music"
XDG_PICTURES_DIR="$HOME/picture"
XDG_PUBLICSHARE_DIR="$HOME/public"
XDG_TEMPLATES_DIR="$HOME/template"
XDG_VIDEOS_DIR="$HOME/video"
</code></pre>
<h4 id="更改家目录名称"><a class="header" href="#更改家目录名称">更改家目录名称</a></h4>
<pre><code class="language-bash">mv 桌面/ desktop
mv 文档/ document
mv 下载/ download
mv 音乐/ music
mv 图片/ picture
mv 公共/ public
mv 模板/ template
mv 视频/ video
</code></pre>
<h4 id="重启系统"><a class="header" href="#重启系统">重启系统</a></h4>
<pre><code class="language-bash">reboot
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="all-kinds-of-proxy-setting"><a class="header" href="#all-kinds-of-proxy-setting">All Kinds of Proxy Setting</a></h1>
<p>In china, you can't access to the real Internet directly. So you have to use some proxy in some software.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="配置系统代理"><a class="header" href="#配置系统代理">配置系统代理</a></h1>
<h4 id="编辑文件"><a class="header" href="#编辑文件">编辑文件</a></h4>
<pre><code class="language-bash">sudo vim  /etc/profile.d/proxy.sh
</code></pre>
<pre><code class="language-sh"># set proxy config via profie.d - should apply for all users
export http_proxy="http://10.10.1.10:8080/"
export https_proxy="http://10.10.1.10:8080/"
export ftp_proxy="http://10.10.1.10:8080/"
export no_proxy="127.0.0.1,localhost"
# For curl
export HTTP_PROXY="http://10.10.1.10:8080/"
export HTTPS_PROXY="http://10.10.1.10:8080/"
export FTP_PROXY="http://10.10.1.10:8080/"
export NO_PROXY="127.0.0.1,localhost"
</code></pre>
<h4 id="添加权限"><a class="header" href="#添加权限">添加权限</a></h4>
<pre><code class="language-bash">sudo chmod +x  /etc/profile.d/proxy.sh
</code></pre>
<h4 id="刷新环境变量"><a class="header" href="#刷新环境变量">刷新环境变量</a></h4>
<pre><code class="language-bash">source /etc/profile.d/proxy.sh
</code></pre>
<h4 id="查看环境变量进行确认是否生效"><a class="header" href="#查看环境变量进行确认是否生效">查看环境变量进行确认是否生效</a></h4>
<pre><code class="language-bash">env | grep -i proxy
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="配置-docker-代理"><a class="header" href="#配置-docker-代理">配置 Docker 代理</a></h1>
<h4 id="编辑文件-1"><a class="header" href="#编辑文件-1">编辑文件</a></h4>
<pre><code class="language-bash">sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf
</code></pre>
<h4 id="添加以下内容-1"><a class="header" href="#添加以下内容-1">添加以下内容</a></h4>
<pre><code class="language-ini">[Service]
Environment="HTTP_PROXY=http://127.0.0.1:7890"
Environment="HTTPS_PROXY=http://127.0.0.1:7890"
</code></pre>
<h4 id="重载服务"><a class="header" href="#重载服务">重载服务</a></h4>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="配置容器代理"><a class="header" href="#配置容器代理">配置容器代理</a></h1>
<pre><code class="language-bash">vim ~/.docker/config.json

{ 
  "proxies":
    { 
      "default": 
        { 
          "httpProxy": "http://172.17.0.1:7890", 
          "httpsProxy": "https://172.17.0.1:7890", 
          "noProxy": "*.&lt;domain&gt;,127.0.0.0/8" 
        } 
    } 
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="配置-k3s-代理"><a class="header" href="#配置-k3s-代理">配置 K3S 代理</a></h1>
<ul>
<li>
<p><code>/etc/systemd/system/k3s.service.env</code></p>
</li>
<li>
<p><code>/etc/systemd/system/k3s-agent.service.env</code></p>
</li>
</ul>
<pre><code class="language-bash">HTTP_PROXY=http://your-proxy.example.com:8888
HTTPS_PROXY=http://your-proxy.example.com:8888
NO_PROXY=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="useful-scripts"><a class="header" href="#useful-scripts">Useful Scripts</a></h1>
<p>In Linux, you can use some scripts to do some repetitive tasks.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="node-版本控制"><a class="header" href="#node-版本控制">Node 版本控制</a></h1>
<pre><code class="language-bash">sudo vim hexo_start_stop.sh
sudo chmod +x hexo_start_stop.sh
</code></pre>
<pre><code class="language-sh">#!/bin/bash

# 检查参数
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 start|stop"
    exit 1
fi

# 定义变量
NODE_V12_DIR="/home/knight/node/node-v12/bin"
NODE_V20_DIR="/home/knight/node/node-v20/bin"
NODE_BIN="/usr/bin/node"
NODE_LOCAL_BIN="/usr/local/bin/node"
NPM_BIN="/usr/bin/npm"
NPM_LOCAL_BIN="/usr/local/bin/npm"
NPX_BIN="/usr/bin/npx"
NPX_LOCAL_BIN="/usr/local/bin/npx"
# HEXO_LOCAL_BIN="/usr/local/bin/hexo"

# 根据参数执行相应的操作
case "$1" in
    start)
        # 更新符号链接到 Node v12
        sudo ln -sf "$NODE_V12_DIR/node" "$NODE_BIN"
        sudo ln -sf "$NODE_V12_DIR/node" "$NODE_LOCAL_BIN"
        sudo ln -sf "$NODE_V12_DIR/npm" "$NPM_BIN"
        sudo ln -sf "$NODE_V12_DIR/npm" "$NPM_LOCAL_BIN"
        sudo ln -sf "$NODE_V12_DIR/npx" "$NPX_BIN"
        sudo ln -sf "$NODE_V12_DIR/npx" "$NPX_LOCAL_BIN"
        # sudo ln -sf "$NODE_V12_DIR/hexo" "$HEXO_LOCAL_BIN"
        echo "Node, NPM, and NPX links updated to Node v12."
        ;;
    stop)
        # 更新符号链接到 Node v20
        sudo ln -sf "$NODE_V20_DIR/node" "$NODE_BIN"
        sudo ln -sf "$NODE_V20_DIR/node" "$NODE_LOCAL_BIN"
        sudo ln -sf "$NODE_V20_DIR/npm" "$NPM_BIN"
        sudo ln -sf "$NODE_V20_DIR/npm" "$NPM_LOCAL_BIN"
        sudo ln -sf "$NODE_V20_DIR/npx" "$NPX_BIN"
        sudo ln -sf "$NODE_V20_DIR/npx" "$NPX_LOCAL_BIN"
        # sudo rm -rf "$HEXO_LOCAL_BIN"
        echo "Node, NPM, and NPX links updated to Node v20."
        ;;
    *)
        echo "Invalid argument. Usage: $0 start|stop"
        exit 1
        ;;
esac

exit 0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="docker-代理启停"><a class="header" href="#docker-代理启停">Docker 代理启停</a></h1>
<pre><code class="language-bash">sudo vim docker_proxy_start_stop.sh
sudo chmod +x docker_proxy_start_stop.sh
</code></pre>
<pre><code class="language-sh">#!/bin/bash

# Define paths
CONF_FILE="/etc/systemd/system/docker.service.d/http-proxy.conf"
BACKUP_CONF_FILE="/etc/systemd/system/docker.service.d/http-proxy.conf.bak"

# Function to enable proxy
enable_proxy() {
    # Check if the current configuration file is already the backup
    if [ -f "$CONF_FILE" ] &amp;&amp; cmp --silent "$CONF_FILE" "$BACKUP_CONF_FILE"; then
        echo "Proxy configuration is already enabled."
    else
        # Move the backup configuration to the active configuration file
        sudo mv "$BACKUP_CONF_FILE" "$CONF_FILE"
        
        # Reload systemd manager configuration
        sudo systemctl daemon-reload
        
        # Restart Docker service
        sudo systemctl restart docker.service
        echo "Proxy configuration enabled."
    fi
}

# Function to disable proxy
disable_proxy() {
    # Check if the current configuration file is the original
    if [ -f "$CONF_FILE" ] &amp;&amp; ! cmp --silent "$CONF_FILE" "$BACKUP_CONF_FILE"; then
        # Move the active configuration file to the backup
        sudo mv "$CONF_FILE" "$BACKUP_CONF_FILE"
        
        # Reload systemd manager configuration
        sudo systemctl daemon-reload
        
        # Restart Docker service
        sudo systemctl restart docker.service
        echo "Proxy configuration disabled."
    else
        echo "Proxy configuration is already disabled."
    fi
}

# Check the command argument
case $1 in
    start)
        enable_proxy
        ;;
    stop)
        disable_proxy
        ;;
    *)
        echo "Usage: $0 {start|stop}"
        exit 1
        ;;
esac

exit 0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="docker-镜像上传私有仓库"><a class="header" href="#docker-镜像上传私有仓库">Docker 镜像上传私有仓库</a></h1>
<blockquote>
<p>Tips：下载镜像时，需要开启 Docker 代理。上传到私有仓库时，需要关闭 Docker 代理。</p>
</blockquote>
<h3 id="提取镜像列表"><a class="header" href="#提取镜像列表">提取镜像列表</a></h3>
<p>从 Helm 的 values 文件中获取所需的镜像，保存在 images.tmp 文件中。</p>
<p><strong>使用方法：get_images.sh values-nginx.yaml</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:06
# * Filename      : get_images.sh
# * Description   : Extracts Docker image names and tags from a YAML file and writes them to images.tmp
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;values-nginx.yaml&gt;"
  exit 1
fi

# 从命令行参数获取文件名
input_file="$1"

# 清空或创建 images.tmp 文件
&gt; images.tmp

while read -r line; do
  if [[ $line == *"repository:"* ]]; then
    repository=$(echo $line | cut -d':' -f2 | xargs)
  elif [[ $line == *"tag:"* ]]; then
    tag=$(echo $line | cut -d':' -f2 | xargs)
    # 将结果写入 images.tmp 文件
    echo "$repository:$tag" &gt;&gt; images.tmp
  fi
done &lt; "$input_file"
</code></pre>
<h3 id="拉取镜像"><a class="header" href="#拉取镜像">拉取镜像</a></h3>
<p>获取 images.tmp 文件所有的镜像。如果你有别的文件，也可以使用别的文件，按照每行一个镜像名的格式进行书写即可。</p>
<p><strong>使用方法：pull_images.sh images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:34
# * Filename      : pull_images.sh
# * Description   : Pull images from Internet
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;images.tmp&gt;"
  exit 1
fi

# 从命令行参数获取文件名
input_file="$1"

# 读取文件并拉取每个镜像
while read -r image; do
  if [ -n "$image" ]; then
    echo "正在拉取镜像: $image"
    docker pull "$image"
  fi
done &lt; "$input_file"
</code></pre>
<h3 id="将镜像改名"><a class="header" href="#将镜像改名">将镜像改名</a></h3>
<p>改名主要是为 <code>docker tag</code> 做准备，将改名后的镜像名保存在 new_images.tmp 文件中，可以修改脚本的<code>private_registry</code>变量来修改私有仓库地址。</p>
<p><strong>使用方法：update_images.sh images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:06
# * Filename      : update_images.sh
# * Description   : Updates image paths from a specified file and outputs to new_images.tmp
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;images.tmp&gt;"
  exit 1
fi

# 从命令行参数获取文件名
input_file="$1"
output_file="new_images.tmp"
private_registry="192.167.3.18/"

# 创建或清空输出文件
&gt; "$output_file"

# 处理文件内容
while IFS= read -r line; do
  # 检查行是否为空
  if [[ -n "$line" ]]; then
    # 在镜像名称前加上私有仓库地址
    echo "${private_registry}${line}" &gt;&gt; "$output_file"
  fi
done &lt; "$input_file"
</code></pre>
<h3 id="重命名-docker-镜像"><a class="header" href="#重命名-docker-镜像">重命名 Docker 镜像</a></h3>
<p>使用<code>Docker tag</code>命令重命名镜像，保存在机器中，并且将新的镜像名保存在 new_images.tmp 文件中。</p>
<p><strong>使用方法：tag_images.sh images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:06
# * Filename      : tag_images.sh
# * Description   : Tags Docker images based on a specified file
# **********************************************************

# 检查参数数量
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;images.tmp&gt;"
  exit 1
fi

# 从命令行参数获取文件名
input_file="$1"
output_file="new_images.tmp"
private_registry="192.167.3.18/"

# 创建或清空输出文件
&gt; "$output_file"

# 处理文件内容并执行 docker tag 命令
while read -r original_image; do
  # 检查行是否为空
  if [[ -n "$original_image" ]]; then
    # 组合新的镜像名称
    new_image_name="${private_registry}${original_image}"
    
    # 输出正在标记的镜像信息
    echo "正在标记镜像: docker tag $original_image $new_image_name"
    
    # 执行 docker tag 命令
    docker tag "$original_image" "$new_image_name"
    
    # 将新的镜像名称写入输出文件
    echo "$new_image_name" &gt;&gt; "$output_file"
  fi
done &lt; "$input_file"

echo "所有镜像已成功标记并保存到 $output_file"
</code></pre>
<h3 id="推送镜像"><a class="header" href="#推送镜像">推送镜像</a></h3>
<p>推送镜像到私有仓库，使用脚本时，请将<code>private_registry</code>变量修改为私有仓库地址。</p>
<p><strong>使用方法：push_images.sh new_images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-14 09:01
# * Filename      : push_images.sh
# * Description   : Push Docker images to a registry
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;images.tmp&gt;"
  exit 1
fi

# 从命令行参数获取文件名
images_file="$1"
target_registry="192.167.3.18/library/"

# 遍历images.tmp文件中的每一行
while IFS= read -r line; do
    # 检查行是否为空
    if [ -z "$line" ]; then
        continue
    fi

    # 打印操作信息
    echo "正在推送镜像: $line"

    # 推送镜像
    docker push "$line"

done &lt; "$images_file"

echo "所有指定的镜像已被推送。"
</code></pre>
<h3 id="删除镜像"><a class="header" href="#删除镜像">删除镜像</a></h3>
<p>从本地删除已经上传的镜像。</p>
<p><strong>使用方法：delete_images.sh new_images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-14 09:02
# * Filename      : delete_images.sh
# * Description   : Delete images that pushed
# **********************************************************

# 检查是否有参数传递
if [ $# -ne 1 ]; then
    echo "Usage: $0 &lt;path-to-file&gt;"
    exit 1
fi

# 指定包含镜像名称的文件路径
images_file="$1"

# 检查文件是否存在
if [ ! -f "$images_file" ]; then
    echo "Error: File '$images_file' not found."
    exit 1
fi

# 逐行读取文件中的镜像名称
while IFS= read -r image; do
    # 删除镜像，忽略不存在的镜像
    if docker rmi "$image" &amp;&gt;/dev/null; then
        echo "Image $image has been deleted."
    else
        echo "Image $image does not exist or could not be deleted."
    fi
done &lt; "$images_file"

echo "All listed images have been processed."
</code></pre>
<h3 id="all-in-one"><a class="header" href="#all-in-one">ALL IN ONE</a></h3>
<p>将所有的脚本整合成一个脚本，方便使用。</p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:06
# * Filename      : all_in_one.sh
# * Description   : Pull images
# **********************************************************

# 欢迎信息
echo "欢迎使用 Docker 镜像管理脚本！"
echo ""

# 菜单函数
print_menu() {
  echo "*********************************************************"
  echo "*                                                       *"
  echo "*     1. Get images from Helm yaml files.               *"
  echo "*                                                       *"
  echo "*     2. Pull images from docker hub to local.          *"
  echo "*                                                       *"
  echo "*     3. Docker tag images you need to change.          *"
  echo "*                                                       *"
  echo "*     4. Push images to your private docker registry.   *"
  echo "*                                                       *"
  echo "*     5. Delete images from local.                      *"
  echo "*                                                       *"
  echo "*     6. cat images.tmp.                                *"
  echo "*                                                       *"
  echo "*     7. cat new_images.tmp.                            *"
  echo "*                                                       *"
  echo "*     8. About.                                         *"
  echo "*                                                       *"
  echo "*     0. Exit.                                          *"
  echo "*                                                       *"
  echo "*********************************************************"
}

# 主循环
while true; do
  print_menu
  read -p "请输入功能数字: " choice

  case $choice in
    1)
      read -p "请输入 Helm yaml 文件路径: " yaml_file
      if [ ! -f "$yaml_file" ]; then
        echo "错误: 文件 '$yaml_file' 不存在."
      else
        &gt; images.tmp
        while read -r line; do
          if [[ $line == *"repository:"* ]]; then
            repository=$(echo $line | cut -d':' -f2 | xargs)
          elif [[ $line == *"tag:"* ]]; then
            tag=$(echo $line | cut -d':' -f2 | xargs)
            echo "$repository:$tag" &gt;&gt; images.tmp
          fi
        done &lt; "$yaml_file"
        echo "已从 '$yaml_file' 中提取镜像并保存到 'images.tmp'，由于 Helm yaml 文件可能包含重复的镜像以及失效的 Tag 名称，请手动检查 images.tmp 文件。"
      fi

    ;;
    2)
      read -p "请输入 images.tmp 文件路径 (默认: images.tmp): " images_file
      images_file=${images_file:-images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        while IFS= read -r image || [ -n "$image" ]; do # 修复读取逻辑以处理没有换行的情况
          if [ -n "$image" ]; then
            echo "正在拉取镜像: $image"
            docker pull "$image"
          fi
        done &lt; "$images_file"
        echo "所有镜像已成功拉取."
      fi

    ;;
    3)
      read -p "请输入 images.tmp 文件路径 (默认: images.tmp): " images_file
      images_file=${images_file:-images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        output_file="new_images.tmp"
        header="192.167.3.18/"
        &gt; "$output_file"

        while IFS= read -r original_image || [ -n "$original_image" ]; do # 修复读取逻辑以处理没有换行的情况
          # 在每一行前添加私有镜像仓库地址
          new_image_name="${header}${original_image}"
          echo "正在标记镜像: docker tag $original_image $new_image_name"
          docker tag "$original_image" "$new_image_name"
          echo "$new_image_name" &gt;&gt; "$output_file"
        done &lt; "$images_file"

        if [ -s "$output_file" ]; then # 检查输出文件是否非空
          echo "所有镜像已成功标记并保存到 '$output_file'."
        else
          echo "警告: '$output_file' 文件为空，未能标记任何镜像."
        fi
      fi

    ;;
    4)
      read -p "请输入 new_images.tmp 文件路径 (默认: new_images.tmp): " images_file
      images_file=${images_file:-new_images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        while IFS= read -r line || [ -n "$line" ]; do # 修复读取逻辑以处理没有换行的情况
          if [ -z "$line" ]; then continue; fi
          echo "正在推送镜像: $line"
          docker push "$line"
        done &lt; "$images_file"

        echo "所有指定的镜像已被推送."
      fi

    ;;
    5)
      read -p "请输入包含要删除的镜像名称的文件路径 (默认: new_images.tmp): " images_file
      images_file=${images_file:-new_images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        while IFS= read -r image || [ -n "$image" ]; do # 修复读取逻辑以处理没有换行的情况
          if docker rmi "$image" &amp;&gt;/dev/null; then
            echo "镜像 $image 已被删除."
          else
            echo "镜像 $image 不存在或无法删除."
          fi
        done &lt; "$images_file"

        echo "所有列出的镜像已被处理."
      fi

    ;;
    6)
      cat images.tmp
      
    ;;
    7)
      cat new_images.tmp
      
    ;;
    8)
      # 打印关于信息
      cat &lt;&lt; 'EOF'
        _..._   666       
      .'     '.      _
     /    .-""-\   _/ \
   .-|   /:.   |  |   |
   |  \  |:.   /.-'-./ 
   | .-'-;:__.'    =/  
   .'=  *=|NASA _.='   
  /   _.  |    ;       
 ;-.-'|    \   |       
/   | \    _\  _\      
\__/'._;. \==' ==\     
         \    \   |    
         /    /   /    
         /-._/-._/     
  lxp    \   `\  \     
          `-._/._/     
EOF

    ;;
    0)
      echo "退出程序。再见！"
      exit 0

    ;;
    *)
      echo "无效的选择，请重新输入."
    ;;
  esac

  # 打印分隔行以提高可读性，并重新显示菜单
  printf "\n\n\n"

done
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="关闭盖子禁用休眠"><a class="header" href="#关闭盖子禁用休眠">关闭盖子禁用休眠</a></h1>
<h4 id="编辑配置文件-1"><a class="header" href="#编辑配置文件-1">编辑配置文件</a></h4>
<pre><code class="language-bash">sudo gedit /etc/systemd/logind.conf
</code></pre>
<h4 id="修改这一行的值"><a class="header" href="#修改这一行的值">修改这一行的值</a></h4>
<pre><code class="language-bash">HandleLidSwitch=ignore
</code></pre>
<h4 id="重启服务"><a class="header" href="#重启服务">重启服务</a></h4>
<pre><code class="language-bash">sudo systemctl restart systemd-logind
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="windterm-桌面图标"><a class="header" href="#windterm-桌面图标">WindTerm 桌面图标</a></h1>
<pre><code class="language-ini">[Desktop Entry]
Name=WindTerm
Comment=A professional cross-platform SSH/Sftp/Shell/Telnet/Serial terminal
GenericName=Connect Client
Exec=/home/knight/windTerm/WindTerm_2.6.1/WindTerm
Type=Application
Icon=/home/knight/windTerm/WindTerm_2.6.1/windterm.png
StartupNotify=false
StartupWMClass=Code
Categories=Application;Development
Actions=new-empty-window
Keywords=windterm

[Desktop Action new-empty-window]
Name=New Empty Window
Exec=/home/knight/windTerm/WindTerm_2.6.1/WindTerm
Icon=/home/knight/windTerm/WindTerm_2.6.1/windterm.png
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="使用-frp"><a class="header" href="#使用-frp">使用 frp</a></h1>
<h4 id="项目链接"><a class="header" href="#项目链接">项目链接</a></h4>
<p><a href="https://github.com/fatedier/frp">https://github.com/fatedier/frp</a></p>
<p><a href="https://gofrp.org/zh-cn/">中文文档</a></p>
<h3 id="ssh-服务"><a class="header" href="#ssh-服务">SSH 服务</a></h3>
<h4 id="服务器配置"><a class="header" href="#服务器配置">服务器配置</a></h4>
<pre><code class="language-bash">vim frps.toml
</code></pre>
<pre><code class="language-bash">bindPort = 5432  # frp 建立通讯的端口
auth.token = "123456"
</code></pre>
<h4 id="客户端配置"><a class="header" href="#客户端配置">客户端配置</a></h4>
<pre><code class="language-bash">vim frpc.toml
</code></pre>
<pre><code class="language-bash">serverAddr = "123.00.00.01"
serverPort = 5432   # frp 建立通讯的端口
auth.token = "123456"

[[proxies]]
name = "ssh"
type = "tcp"
localIP = "127.0.0.1"
localPort = 22
remotePort = 10086   # frp 映射的端口，VPS需要打开的端口
</code></pre>
<h3 id="ftp-服务"><a class="header" href="#ftp-服务">FTP 服务</a></h3>
<h4 id="服务器配置-1"><a class="header" href="#服务器配置-1">服务器配置</a></h4>
<pre><code class="language-bash">vim frps.toml
</code></pre>
<pre><code class="language-bash">bindPort = 5432
auth.token = "123456"
</code></pre>
<h4 id="客户端配置-1"><a class="header" href="#客户端配置-1">客户端配置</a></h4>
<pre><code class="language-bash">vim frpc.toml
</code></pre>
<pre><code class="language-bash">serverAddr = "123.00.00.01"
serverPort = 5432
auth.token = "123456"

[[proxies]]
name = "test_static_file"
type = "tcp"
localPort = 21
remotePort = 10086

[proxies.plugin]
type = "static_file"

# 本地文件目录，对外提供访问
localPath = "/your/local/path"

# URL 中的前缀，将被去除，保留的内容即为要访问的文件路径
stripPrefix = "static"
httpUser = "user"
httpPassword = "password"
</code></pre>
<h4 id="systemctl-配置"><a class="header" href="#systemctl-配置">systemctl 配置</a></h4>
<ul>
<li>frps | 服务器配置</li>
</ul>
<pre><code class="language-bash">sudo vim /etc/systemd/system/frps.service
</code></pre>
<pre><code class="language-ini">[Unit]
# 服务名称，可自定义
Description = frp server
After = network.target syslog.target
Wants = network.target
[Service]
Type = simple
# 启动frps的命令，需修改为您的frps的安装路径
ExecStart = /root/frp/frps -c /root/frp/config.toml
[Install]
WantedBy = multi-user.target
</code></pre>
<p>重载服务</p>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl enable --now frps
</code></pre>
<ul>
<li>frpc | 客户端配置</li>
</ul>
<pre><code class="language-bash">sudo vim /etc/systemd/system/frpc.service
</code></pre>
<pre><code class="language-ini">[Unit]
Description=FRPC Client Service
After=network.target

[Service]
User=knight
Group=knight
Type=simple
ExecStart=/home/knight/frp/frpc -c /home/knight/frp/config.toml
Restart=on-failure
RestartSec=5s
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=frpc

[Install]
WantedBy=multi-user.target
</code></pre>
<p>重载服务</p>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl enable --now frpc
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="asciiquarium-终端动画"><a class="header" href="#asciiquarium-终端动画">asciiquarium 终端动画</a></h1>
<h4 id="ubuntu-配置"><a class="header" href="#ubuntu-配置">Ubuntu 配置</a></h4>
<pre><code class="language-bash">sudo apt-get install -y perl libcurses-perl
tar -xf Term-Animation-2.4.tar.gz
tar -xf asciiquarium.tar.gz
cd Term-Animation-2.4/ &amp;&amp; perl Makefile.PL &amp;&amp; make &amp;&amp; sudo make install
cd asciiquarium_1.1/
cp asciiquarium /usr/local/bin
sudo chmod +x /usr/local/bin/asciiquarium
asciiquarium
</code></pre>
<h4 id="centos-配置"><a class="header" href="#centos-配置">Centos 配置</a></h4>
<pre><code class="language-bash">cd /opt
yum install -y wget
wget http://search.cpan.org/CPAN/authors/id/K/KB/KBAUCOM/Term-Animation-2.4.tar.gz
tar xf Term-Animation-2.4.tar.gz
yum install perl-Curses.x86_64  -y
yum install perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker  -y
cd /opt/Term-Animation-2.4/  &amp;&amp; perl Makefile.PL
make
make install
cd /opt
wget http://www.robobunny.com/projects/asciiquarium/asciiquarium.tar.gz
tar -zxvf asciiquarium.tar.gz
cd asciiquarium_1.1/
cp asciiquarium /usr/local/bin
chmod +x /usr/local/bin/asciiquarium
asciiquarium
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kns-命名空间锁定"><a class="header" href="#kns-命名空间锁定">kns 命名空间锁定</a></h1>
<h4 id="下载-fzf"><a class="header" href="#下载-fzf">下载 fzf</a></h4>
<pre><code class="language-bash">sudo apt install fzf
</code></pre>
<h4 id="编辑-kns-脚本"><a class="header" href="#编辑-kns-脚本">编辑 kns 脚本</a></h4>
<pre><code class="language-bash">vim kns
</code></pre>
<pre><code class="language-shell">#!/bin/sh
# quick Kubernetes Namespace Switcher
# ISC Blendle, 2017

set -eu

if [ ! -x "$(which kubectl 2&gt;/dev/null)" ]; then
  echo "please install: kubectl (https://kubernetes.io/docs/tasks/kubectl/install/)" &gt;&amp;2
  exit 1
fi
if [ ! -x "$(which fzf 2&gt;/dev/null)" ]; then
  echo "please install: fzf (https://github.com/junegunn/fzf)" &gt;&amp;2
  exit 1
fi

current="$(kubectl config current-context)"
namespace="$(kubectl config view -o jsonpath="{.contexts[?(@.name == '${current}')].context.namespace}")"
if [ -z "$namespace" ]; then
  namespace="default"
fi

selected=$( (kubectl get namespaces -o=jsonpath="{.items[?(@.metadata.name!='$namespace')].metadata.name}" | xargs -n 1; echo $namespace ) | fzf -0 -1 --tac -q "${1:-""}" --prompt "$current&gt; ")
if [ -n "$selected" ]; then
  kubectl config set-context "$current" "--namespace=$selected" &gt;/dev/null
  echo "Set context namespace to \"$selected\""
fi
</code></pre>
<h4 id="添加权限-1"><a class="header" href="#添加权限-1">添加权限</a></h4>
<pre><code class="language-bash">chmod +x kns
sudo mv kns /usr/local/bin/kns
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vscode-远程连接主机"><a class="header" href="#vscode-远程连接主机">VSCODE 远程连接主机</a></h1>
<h4 id="设置免密登录"><a class="header" href="#设置免密登录">设置免密登录</a></h4>
<pre><code class="language-bash">ssh-keygen -t rsa

ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.1.1
</code></pre>
<h4 id="添加config配置文件"><a class="header" href="#添加config配置文件">添加config配置文件</a></h4>
<pre><code class="language-bash">vim ~/.ssh/config

# 添加以下内容
Host ali
  HostName 192.168.1.1
  User root
  IdentityFile ~/.ssh/id_rsa
  Port 22
</code></pre>
<h4 ignore="ture">下载VSCode插件</h4>
<p>点击VSCode左下角图标，形似“&gt;&lt;”，点击会自动安装。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ollama-服务发现"><a class="header" href="#ollama-服务发现">Ollama 服务发现</a></h1>
<h4 id="编辑文件-2"><a class="header" href="#编辑文件-2">编辑文件</a></h4>
<pre><code class="language-bash">sudo vim /etc/systemd/system/ollama.service
</code></pre>
<h4 id="在service下添加"><a class="header" href="#在service下添加">在[Service]下添加</a></h4>
<pre><code class="language-ini">[Service]
Environment="OLLAMA_HOST=0.0.0.0"
</code></pre>
<h4 id="重载服务-1"><a class="header" href="#重载服务-1">重载服务</a></h4>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl restart ollama
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="some-funny-docker-projects"><a class="header" href="#some-funny-docker-projects">Some Funny Docker Projects</a></h1>
<p>I collected some funny docker projects here. If you want to try, confirm you install docker and docker-compose first.</p>
<p><img src="mdbook-plantuml-img/d779203b2db926ed6f33f73740add43216c47889.svg" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="openweb-ui"><a class="header" href="#openweb-ui">Openweb-UI</a></h1>
<h4 id="open-webui-官网"><a class="header" href="#open-webui-官网">open-webui 官网</a></h4>
<p><a href="https://docs.openwebui.com/">https://docs.openwebui.com/</a></p>
<h4 id="docker-部署"><a class="header" href="#docker-部署">Docker 部署</a></h4>
<pre><code class="language-bash">version: '3'

services:
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: open-webui
    ports:
      - "3000:8080"
    volumes:
      - open-webui:/app/backend/data
#    restart: always
    extra_hosts:
      - "host.docker.internal:host-gateway"

volumes:
  open-webui:
</code></pre>
<blockquote>
<p>docker部署open-webui需要配合<a href="./ollama_services_found.html">ollama 服务发现</a>使用，否则会出现open-webui无法识别到本地模型的情况。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="yesplaymusic"><a class="header" href="#yesplaymusic">Yesplaymusic</a></h1>
<h4 id="yesplaymusic-官网"><a class="header" href="#yesplaymusic-官网">yesplaymusic 官网</a></h4>
<p><a href="https://github.com/qier222/YesPlayMusic">https://github.com/qier222/YesPlayMusic</a></p>
<h4 id="docker-部署-1"><a class="header" href="#docker-部署-1">Docker 部署</a></h4>
<pre><code class="language-yaml">version: '3.9'

services:
  yesplaymusic:
    image: fogforest/yesplaymusic
    container_name: yesplaymusic
    restart: always
    ports:
      - "7900:80"
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
