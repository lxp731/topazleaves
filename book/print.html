<!DOCTYPE HTML>
<html lang="zh-cn" class="rust" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>TOPAZ LEAF</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('rust')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><li class="part-title">TOPAZ LEAF</li><li class="chapter-item "><a href="ubuntu_software.html"><strong aria-hidden="true">1.</strong> Ubuntu Software</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="google_input_install.html"><strong aria-hidden="true">1.1.</strong> Install Google-PinYin</a></li><li class="chapter-item "><a href="wechat_install.html"><strong aria-hidden="true">1.2.</strong> Install Wechat</a></li><li class="chapter-item "><a href="clash_verge_install.html"><strong aria-hidden="true">1.3.</strong> Install Clash-Verge</a></li><li class="chapter-item "><a href="docker_install.html"><strong aria-hidden="true">1.4.</strong> Install Docker</a></li><li class="chapter-item "><a href="pycharm_crack.html"><strong aria-hidden="true">1.5.</strong> Crack Pycharm</a></li><li class="chapter-item "><a href="entertainment.html"><strong aria-hidden="true">1.6.</strong> Entertainment</a></li><li class="chapter-item "><a href="vim_support_system_clipboard.html"><strong aria-hidden="true">1.7.</strong> Vim Support System Clipboard</a></li></ol></li><li class="chapter-item "><a href="env_variable_setting.html"><strong aria-hidden="true">2.</strong> Setting ENV</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="vimrc_basic_setting.html"><strong aria-hidden="true">2.1.</strong> Basic .vimrc</a></li><li class="chapter-item "><a href="bashrc_setting.html"><strong aria-hidden="true">2.2.</strong> Basic .bashrc</a></li><li class="chapter-item "><a href="user-dirs.dirs_setting.html"><strong aria-hidden="true">2.3.</strong> .user-dirs.dirs</a></li></ol></li><li class="chapter-item "><a href="vim_plugin_manager.html"><strong aria-hidden="true">3.</strong> Vim Plugin</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="nerdtree.html"><strong aria-hidden="true">3.1.</strong> NERDTree</a></li></ol></li><li class="chapter-item "><a href="kinds_proxy_setting.html"><strong aria-hidden="true">4.</strong> Proxy Configuration</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="system_proxy_setting.html"><strong aria-hidden="true">4.1.</strong> System Proxy</a></li><li class="chapter-item "><a href="docker_proxy_setting.html"><strong aria-hidden="true">4.2.</strong> Docker Proxy</a></li><li class="chapter-item "><a href="container_proxy_setting.html"><strong aria-hidden="true">4.3.</strong> Container Proxy</a></li><li class="chapter-item "><a href="k3s_proxy_setting.html"><strong aria-hidden="true">4.4.</strong> K3S Proxy</a></li></ol></li><li class="chapter-item "><a href="useful_scripts.html"><strong aria-hidden="true">5.</strong> Useful Scripts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="node_version_control.html"><strong aria-hidden="true">5.1.</strong> Switch Node Version</a></li><li class="chapter-item "><a href="docker_proxy_start_stop.html"><strong aria-hidden="true">5.2.</strong> Docker Proxy ON & OFF</a></li><li class="chapter-item "><a href="docker_push_registry.html"><strong aria-hidden="true">5.3.</strong> Docker Push Private Registry</a></li></ol></li><li class="chapter-item "><a href="disable_sleep.html"><strong aria-hidden="true">6.</strong> Disable Hibernation</a></li><li class="chapter-item "><a href="windterm_desktop.html"><strong aria-hidden="true">7.</strong> WindTerm Desktop</a></li><li class="chapter-item "><a href="frp_usage.html"><strong aria-hidden="true">8.</strong> FRP Usage</a></li><li class="chapter-item "><a href="asciiquarium_usage.html"><strong aria-hidden="true">9.</strong> Asciiquarium</a></li><li class="chapter-item "><a href="kns_usage.html"><strong aria-hidden="true">10.</strong> kns Usage</a></li><li class="chapter-item "><a href="vscode_remote_usage.html"><strong aria-hidden="true">11.</strong> VS-Code Link Remote Host</a></li><li class="chapter-item "><a href="ollama_services_found.html"><strong aria-hidden="true">12.</strong> Ollama Service Discovery</a></li><li class="chapter-item "><a href="funny_docker_projects.html"><strong aria-hidden="true">13.</strong> Funny Docker Projects</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="openweb-ui.html"><strong aria-hidden="true">13.1.</strong> Openweb-UI</a></li><li class="chapter-item "><a href="yesplaymusic.html"><strong aria-hidden="true">13.2.</strong> Yesplaymusic</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">TOPAZ LEAF</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/lxp731/topazleaves.git" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ubuntu-software"><a class="header" href="#ubuntu-software">Ubuntu Software</a></h1>
<p>Collection of useful software for Ubuntu.</p>
<ul>
<li>
<p><a href="./google_input_install.html">Google-PinYin</a></p>
<p>The best choice for Chinese input. Although Sougou Input is aviailable, it will make your system slow, especially when you restart your system.</p>
</li>
<li>
<p><a href="./wechat_install.html">Wechat</a></p>
<p>Based on wine, it can be used to install wechat on Ubuntu. In spite of defects, it is a good choice for Chinese users.</p>
</li>
<li>
<p><a href="./clash_verge_install.html">Clash Verge</a></p>
<p>After clash for windows, it is recommended to use clash verge.</p>
</li>
<li>
<p><a href="./docker_install.html">Docker</a></p>
</li>
<li>
<p><a href="./pycharm_install.html">Pycharm</a></p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="install-google-pinyin"><a class="header" href="#install-google-pinyin">Install Google-PinYin</a></h1>
<h3 id="on-ubuntu-google-pinyin-based-on-fcitx-so-install-fcitx-firstly"><a class="header" href="#on-ubuntu-google-pinyin-based-on-fcitx-so-install-fcitx-firstly">On Ubuntu, Google-PinYin based on Fcitx. So install Fcitx firstly.</a></h3>
<pre><code class="language-bash">sudo apt install fcitx
</code></pre>
<h3 id="configure-fcitx"><a class="header" href="#configure-fcitx">Configure Fcitx</a></h3>
<pre><code class="language-bash">im-config
</code></pre>
<h3 id="install-google-pinyin-1"><a class="header" href="#install-google-pinyin-1">Install Google-PinYin</a></h3>
<pre><code class="language-bash">sudo apt install fcitx-googlepinyin
</code></pre>
<h3 id="running-fcitx"><a class="header" href="#running-fcitx">Running Fcitx</a></h3>
<pre><code class="language-bash">fcitx-config-gtk3
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wechat-install"><a class="header" href="#wechat-install">Wechat Install</a></h1>
<h4 id="install-deepin-repository"><a class="header" href="#install-deepin-repository">Install Deepin Repository</a></h4>
<pre><code class="language-bash">wget -O- https://deepin-wine.i-m.dev/setup.sh | sh
</code></pre>
<h4 id="install-wechat"><a class="header" href="#install-wechat">Install Wechat</a></h4>
<pre><code class="language-bash">sudo apt install com.qq.weixin.deepin
</code></pre>
<h4 id="解决统信应用解压失败的问题"><a class="header" href="#解决统信应用解压失败的问题">解决统信应用解压失败的问题</a></h4>
<pre><code class="language-bash">sudo vim /opt/deepinwine/tools/run_v4.sh

# find this line
7z x "$APPDIR/$APPTAR" -o"$1"
# update it following line
7z x "$APPDIR/$APPTAR" -o"$1" || true
</code></pre>
<h4 id="remove-wechat"><a class="header" href="#remove-wechat">Remove Wechat</a></h4>
<pre><code class="language-bash">sudo apt remove com.qq.weixin.deepin
</code></pre>
<h4 id="delete-deepin-repository"><a class="header" href="#delete-deepin-repository">Delete Deepin Repository</a></h4>
<pre><code class="language-bash">sudo rm /etc/apt/sources.d.list/deepin-wine.i-m.dev.list
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="install-clash-verge"><a class="header" href="#install-clash-verge">Install Clash-Verge</a></h1>
<h4 id="clash-verge-project-github"><a class="header" href="#clash-verge-project-github">clash-verge Project Github</a></h4>
<p><a href="https://github.com/clash-verge-rev/clash-verge-rev">https://github.com/clash-verge-rev/clash-verge-rev</a></p>
<h4 id="sloved-error-of-clash-verge-依赖于-libwebkit2gtk-40-37"><a class="header" href="#sloved-error-of-clash-verge-依赖于-libwebkit2gtk-40-37">Sloved Error of "clash-verge 依赖于 libwebkit2gtk-4.0-37."</a></h4>
<pre><code class="language-bash">sudo vim /etc/apt/sources.list.d/ubuntu.sources

# 添加以下内容
Types: deb
URIs: http://br.archive.ubuntu.com/ubuntu/
Suites: jammy
Components: main restricted universe multiverse
Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg

sudo apt update
</code></pre>
<h4 id="sloved-error-of-starting-clash-verge-but-no-display-window"><a class="header" href="#sloved-error-of-starting-clash-verge-but-no-display-window">Sloved Error of starting "clash-verge" but no display window</a></h4>
<pre><code>vim /usr/share/applications/clash-verge.desktop 

# 将 Exec 改为：
Exec=env WEBKIT_DISABLE_COMPOSITING_MODE=1 clash-verge
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="install-docker"><a class="header" href="#install-docker">Install Docker</a></h1>
<h4 id="install-official-docker-gpg-key"><a class="header" href="#install-official-docker-gpg-key">Install Official Docker GPG Key</a></h4>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc
</code></pre>
<h4 id="add-official-docker-repo"><a class="header" href="#add-official-docker-repo">Add Official Docker Repo</a></h4>
<pre><code class="language-bash">echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre>
<h4 id="update-package-lists"><a class="header" href="#update-package-lists">Update Package Lists</a></h4>
<pre><code class="language-bash">sudo apt-get update
</code></pre>
<h4 id="install-docker-1"><a class="header" href="#install-docker-1">Install Docker</a></h4>
<pre><code class="language-bash">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre>
<hr />
<p>Well, you can access <a href="https://download.docker.com/">https://download.docker.com/</a> and download the <code>.deb</code> file manually.</p>
<p>Such Path: <code>https://download.docker.com/linux/ubuntu/dists/focal/pool/stable/amd64/</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="crack-pycharm"><a class="header" href="#crack-pycharm">Crack Pycharm</a></h1>
<h4 id="edit-vmoptions"><a class="header" href="#edit-vmoptions">Edit vmoptions</a></h4>
<pre><code class="language-bash">vim /pycharm/install/path/bin/pycharm64.vmoptions
</code></pre>
<h4 id="add-following-options-to-the-end-of-the-file"><a class="header" href="#add-following-options-to-the-end-of-the-file">Add following options to the end of the file</a></h4>
<pre><code class="language-bash">-javaagent:/jar-package/path/jetbra/ja-netfilter.jar=jetbrains
--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED
--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED
</code></pre>
<h4 id="activation-code"><a class="header" href="#activation-code">Activation Code</a></h4>
<pre><code class="language-bash">EUWT4EE9X2-eyJsaWNlbnNlSWQiOiJFVVdUNEVFOVgyIiwibGljZW5zZWVOYW1lIjoic2lnbnVwIHNjb290ZXIiLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJQU0kiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUFBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDV01QIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfV0sIm1ldGFkYXRhIjoiMDEyMDIyMDkwMlBTQU4wMDAwMDUiLCJoYXNoIjoiVFJJQUw6MzUzOTQ0NTE3IiwiZ3JhY2VQZXJpb2REYXlzIjo3LCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-FT9l1nyyF9EyNmlelrLP9rGtugZ6sEs3CkYIKqGgSi608LIamge623nLLjI8f6O4EdbCfjJcPXLxklUe1O/5ASO3JnbPFUBYUEebCWZPgPfIdjw7hfA1PsGUdw1SBvh4BEWCMVVJWVtc9ktE+gQ8ldugYjXs0s34xaWjjfolJn2V4f4lnnCv0pikF7Ig/Bsyd/8bsySBJ54Uy9dkEsBUFJzqYSfR7Z/xsrACGFgq96ZsifnAnnOvfGbRX8Q8IIu0zDbNh7smxOwrz2odmL72UaU51A5YaOcPSXRM9uyqCnSp/ENLzkQa/B9RNO+VA7kCsj3MlJWJp5Sotn5spyV+gA==-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668HeOnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79Lbu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU/Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8/COMrxRlZW5mfzo0xsK0dQGNH3UoG/9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBABqRoNGxAQct9dQUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//lOmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH/0onD
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="entertainment"><a class="header" href="#entertainment">Entertainment</a></h1>
<h3 id="install-kodi"><a class="header" href="#install-kodi">Install KODI</a></h3>
<p><a href="https://kodi.tv/download/">https://kodi.tv/download/</a></p>
<pre><code class="language-bash">sudo apt install software-properties-common
sudo add-apt-repository -y ppa:team-xbmc/ppa
sudo apt install kodi
</code></pre>
<h3 id="install-tmm"><a class="header" href="#install-tmm">Install TMM</a></h3>
<p><a href="https://www.tinymediamanager.org/download/">https://www.tinymediamanager.org/download/</a></p>
<h3 id="qbittorrent-enhanced"><a class="header" href="#qbittorrent-enhanced">qBittorrent Enhanced</a></h3>
<p><a href="https://github.com/c0re100/qBittorrent-Enhanced-Edition/releases">https://github.com/c0re100/qBittorrent-Enhanced-Edition/releases </a></p>
<h3 id="lx-music"><a class="header" href="#lx-music">LX Music</a></h3>
<p><a href="https://github.com/lyswhut/lx-music-desktop/releases">https://github.com/lyswhut/lx-music-desktop/releases</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vim-support-system-clipboard"><a class="header" href="#vim-support-system-clipboard">Vim Support System Clipboard</a></h1>
<h3 id="check-vim-version"><a class="header" href="#check-vim-version">Check Vim version</a></h3>
<pre><code class="language-bash">vim --version | grep clipboard
</code></pre>
<p>Output:</p>
<pre><code class="language-bash">knight@Lenovo:~$ vim --version | grep "clipboard"
-clipboard         +keymap            +printer           +vertsplit
+ex_extra          +mouse_netterm     +syntax            -xterm_clipboard
</code></pre>
<p><code>-clipboard</code> <code>-xterm_clipboard</code> means that vim not support system clipboard.</p>
<h3 id="remove-vim"><a class="header" href="#remove-vim">Remove vim</a></h3>
<p>Uninstall vim if you have installed.</p>
<pre><code class="language-bash">sudo apt remove vim &amp;&amp; sudo apt autoremove
</code></pre>
<h3 id="install-vim-gtk3"><a class="header" href="#install-vim-gtk3">Install vim-gtk3</a></h3>
<pre><code class="language-bash">sudo apt install vim-gtk3
</code></pre>
<h3 id="check-vim-version-again"><a class="header" href="#check-vim-version-again">Check Vim version again</a></h3>
<pre><code class="language-bash">vim --version | grep clipboard
</code></pre>
<p>Output:</p>
<pre><code class="language-bash">knight@Lenovo:~$ vim --version | grep clipboard
+clipboard         +keymap            +printer           +vertsplit
+ex_extra          +mouse_netterm     +syntax            +xterm_clipboard
</code></pre>
<p>Confirem the key value is <code>+clipboard</code> or <code>+xterm_clipboard</code>.</p>
<h3 id="edit-vimrc"><a class="header" href="#edit-vimrc">Edit .vimrc</a></h3>
<pre><code class="language-bash">set clipboard=unnamedplus
</code></pre>
<p>The last you can use <code>"*y</code> to copy the text to system clipboard.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="env-variable-setting"><a class="header" href="#env-variable-setting">ENV Variable Setting</a></h1>
<p>In Linux, environment variables are used to store information that can be used by programs when they are executed. They play a important role in Linux system.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="confgure-vimrc"><a class="header" href="#confgure-vimrc">Confgure .vimrc</a></h1>
<pre><code class="language-bash">autocmd BufNewFile *.sh exec ":call AddTitleForShell()"
function  AddTitleForShell()
   call append(0,"#!/bin/bash")
   call append(1,"# **********************************************************")
   call append(2,"# * Author        : Burgess Leo")
   call append(3,"# * Email         : xiaoli@qiuqiu.com")
   call append(4,"# * Create time   : ".strftime("%Y-%m-%d %H:%M"))
   call append(5,"# * Filename      : ".expand("%:t"))
   call append(6,"# * Description   : ")
   call append(7,"# **********************************************************")
endfunction

"默认显示行号
set nu

"默认显示当前光标所在行
"set cursorline

"可以使用鼠标改变位置
set mouse=a

"设置字典
set dictionary+=/usr/share/dict/words 

"每次在空闲 3 秒后自动保存文件 
set updatetime=3000 
autocmd CursorHold * if &amp;modified | silent! update | endif
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bashrc-configuration"><a class="header" href="#bashrc-configuration">.bashrc Configuration</a></h1>
<pre><code class="language-bash"># 设置shell命令查找
set -o vi

# 设置Ctrl+L清屏
bind -x '"\C-l":clear'

# helm complete
source &lt;(helm completion bash)
source &lt;(kubectl completion bash)

# alias kubectl &amp; setting completion
alias k=kubectl
complete -o default -F __start_kubectl k
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="modify-user-dirsdirs"><a class="header" href="#modify-user-dirsdirs">Modify .user-dirs.dirs</a></h1>
<h4 id="update-the-contents"><a class="header" href="#update-the-contents">Update the Contents</a></h4>
<pre><code class="language-bash">XDG_DESKTOP_DIR="$HOME/desktop"
XDG_DOCUMENTS_DIR="$HOME/document"
XDG_DOWNLOAD_DIR="$HOME/download"
XDG_MUSIC_DIR="$HOME/music"
XDG_PICTURES_DIR="$HOME/picture"
XDG_PUBLICSHARE_DIR="$HOME/public"
XDG_TEMPLATES_DIR="$HOME/template"
XDG_VIDEOS_DIR="$HOME/video"
</code></pre>
<h4 id="update-the-folder-names-of-home-path"><a class="header" href="#update-the-folder-names-of-home-path">Update the Folder Names of Home Path</a></h4>
<pre><code class="language-bash">mv 桌面/ desktop
mv 文档/ document
mv 下载/ download
mv 音乐/ music
mv 图片/ picture
mv 公共/ public
mv 模板/ template
mv 视频/ video
</code></pre>
<h4 id="reboot"><a class="header" href="#reboot">Reboot</a></h4>
<pre><code class="language-bash">reboot
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vim-plugin-manager"><a class="header" href="#vim-plugin-manager">Vim Plugin Manager</a></h1>
<h3 id="official-website"><a class="header" href="#official-website">Official Website</a></h3>
<p><a href="https://github.com/junegunn/vim-plug?tab=readme-ov-file">https://github.com/junegunn/vim-plug?tab=readme-ov-file</a></p>
<h3 id="install-vim-plug"><a class="header" href="#install-vim-plug">Install vim-plug</a></h3>
<pre><code class="language-bash">curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
</code></pre>
<h3 id="modify-vimrc"><a class="header" href="#modify-vimrc">Modify .vimrc</a></h3>
<p>Add the following content:</p>
<pre><code class="language-bash">call plug#begin()

" List your plugins here
Plug 'tpope/vim-sensible'

call plug#end()
</code></pre>
<p>You can add any plugins in the middle of call plug.</p>
<p>Reload the file or restart Vim, then you can:</p>
<ul>
<li><code>:PlugInstall</code> to install the plugins</li>
<li><code>:PlugUpdate</code> to install or update the plugins</li>
<li><code>:PlugDiff</code> to review the changes from the last update</li>
<li><code>:PlugClean</code> to remove plugins no longer in the list</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nerdtree"><a class="header" href="#nerdtree">NERDTree</a></h1>
<blockquote>
<p>Ref: <a href="https://vimawesome.com/plugin/nerdtree-red">https://vimawesome.com/plugin/nerdtree-red</a></p>
</blockquote>
<h3 id="install-nerdtree"><a class="header" href="#install-nerdtree">Install NERDTree</a></h3>
<p>Add <code>Plug 'preservim/nerdtree'</code> to your <code>.vimrc</code>, For example:</p>
<pre><code class="language-bash">call plug#begin()
Plug 'preservim/nerdtree'
call plug#end()
</code></pre>
<p>Reopen a Vim window and type <code>:PlugInstall</code> to install NERDTree.</p>
<h3 id="setting-shortcut-keys"><a class="header" href="#setting-shortcut-keys">Setting Shortcut Keys</a></h3>
<p>Edit <code>.vimrc</code> and add the following code:</p>
<pre><code class="language-bash">nnoremap &lt;leader&gt;n :NERDTreeFocus&lt;CR&gt;
nnoremap &lt;C-n&gt; :NERDTree&lt;CR&gt;
nnoremap &lt;C-t&gt; :NERDTreeToggle&lt;CR&gt;
nnoremap &lt;C-f&gt; :NERDTreeFind&lt;CR&gt;
</code></pre>
<ul>
<li><code>&lt;leader&gt;n</code>: Default <code>&lt;leader&gt;</code> is <code>\</code>. Change the foucus from file to NERDTree.</li>
<li><code>&lt;C-n&gt;</code>: Open NERDTree.</li>
<li><code>&lt;C-t&gt;</code>: Open or Close NERDTree.</li>
<li><code>&lt;C-f&gt;</code>: Open <code>/</code> in NERDTree.</li>
</ul>
<h3 id="auto-open-nerdtree-when-vim-starts-with-a-directory-argument"><a class="header" href="#auto-open-nerdtree-when-vim-starts-with-a-directory-argument">Auto-Open NERDTree when Vim starts with a directory argument</a></h3>
<p>Add the following code to your <code>.vimrc</code>:</p>
<pre><code class="language-bash">" Start NERDTree when Vim starts with a directory argument.
autocmd StdinReadPre * let s:std_in=1
autocmd VimEnter * if argc() == 1 &amp;&amp; isdirectory(argv()[0]) &amp;&amp; !exists('s:std_in') |
    \ execute 'NERDTree' argv()[0] | wincmd p | enew | execute 'cd '.argv()[0] | endif
</code></pre>
<p>More details at <a href="https://vimawesome.com/plugin/nerdtree-red">VimAwesome</a> or <a href="https://github.com/preservim/nerdtree">NERDTree</a>.</p>
<h3 id="rendering"><a class="header" href="#rendering">Rendering</a></h3>
<p><img src="https://github.com/preservim/nerdtree/raw/master/screenshot.png" alt="Rendering" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="all-kinds-of-proxy-setting"><a class="header" href="#all-kinds-of-proxy-setting">All Kinds of Proxy Setting</a></h1>
<p>In china, you can't access to the real Internet directly. So you have to use some proxy in some software.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configure-system-proxy"><a class="header" href="#configure-system-proxy">Configure System Proxy</a></h1>
<h4 id="edit-a-script"><a class="header" href="#edit-a-script">Edit a Script</a></h4>
<pre><code class="language-bash">sudo vim  /etc/profile.d/proxy.sh
</code></pre>
<pre><code class="language-sh"># set proxy config via profie.d - should apply for all users
export http_proxy="http://10.10.1.10:8080/"
export https_proxy="http://10.10.1.10:8080/"
export ftp_proxy="http://10.10.1.10:8080/"
export no_proxy="127.0.0.1,localhost"
# For curl
export HTTP_PROXY="http://10.10.1.10:8080/"
export HTTPS_PROXY="http://10.10.1.10:8080/"
export FTP_PROXY="http://10.10.1.10:8080/"
export NO_PROXY="127.0.0.1,localhost"
</code></pre>
<h4 id="add-exec-permission"><a class="header" href="#add-exec-permission">Add Exec Permission</a></h4>
<pre><code class="language-bash">sudo chmod +x  /etc/profile.d/proxy.sh
</code></pre>
<h4 id="apply-setting"><a class="header" href="#apply-setting">Apply Setting</a></h4>
<pre><code class="language-bash">source /etc/profile.d/proxy.sh
</code></pre>
<h4 id="confirm-env"><a class="header" href="#confirm-env">Confirm ENV</a></h4>
<pre><code class="language-bash">env | grep -i proxy
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configure-docker-proxy"><a class="header" href="#configure-docker-proxy">Configure Docker Proxy</a></h1>
<h4 id="edit-conf-file"><a class="header" href="#edit-conf-file">Edit Conf File</a></h4>
<pre><code class="language-bash">sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf
</code></pre>
<h4 id="add-lines"><a class="header" href="#add-lines">Add Lines</a></h4>
<pre><code class="language-ini">[Service]
Environment="HTTP_PROXY=http://127.0.0.1:7890"
Environment="HTTPS_PROXY=http://127.0.0.1:7890"
</code></pre>
<h4 id="reload-daemon--restart-docker"><a class="header" href="#reload-daemon--restart-docker">Reload Daemon &amp; Restart Docker</a></h4>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configure-container-proxy"><a class="header" href="#configure-container-proxy">Configure Container Proxy</a></h1>
<pre><code class="language-bash">vim ~/.docker/config.json

{ 
  "proxies":
    { 
      "default": 
        { 
          "httpProxy": "http://172.17.0.1:7890", 
          "httpsProxy": "https://172.17.0.1:7890", 
          "noProxy": "*.&lt;domain&gt;,127.0.0.0/8" 
        } 
    } 
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configure-k3s-proxy"><a class="header" href="#configure-k3s-proxy">Configure K3S Proxy</a></h1>
<ul>
<li>
<p><code>/etc/systemd/system/k3s.service.env</code></p>
</li>
<li>
<p><code>/etc/systemd/system/k3s-agent.service.env</code></p>
</li>
</ul>
<pre><code class="language-bash">HTTP_PROXY=http://your-proxy.example.com:8888
HTTPS_PROXY=http://your-proxy.example.com:8888
NO_PROXY=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="useful-scripts"><a class="header" href="#useful-scripts">Useful Scripts</a></h1>
<p>In Linux, you can use some scripts to do some repetitive tasks.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="switch-node-version"><a class="header" href="#switch-node-version">Switch Node Version</a></h1>
<pre><code class="language-bash">sudo vim hexo_start_stop.sh
sudo chmod +x hexo_start_stop.sh
</code></pre>
<pre><code class="language-sh">#!/bin/bash

# 检查参数
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 start|stop"
    exit 1
fi

# 定义变量
NODE_V12_DIR="/home/knight/node/node-v12/bin"
NODE_V20_DIR="/home/knight/node/node-v20/bin"
NODE_BIN="/usr/bin/node"
NODE_LOCAL_BIN="/usr/local/bin/node"
NPM_BIN="/usr/bin/npm"
NPM_LOCAL_BIN="/usr/local/bin/npm"
NPX_BIN="/usr/bin/npx"
NPX_LOCAL_BIN="/usr/local/bin/npx"
# HEXO_LOCAL_BIN="/usr/local/bin/hexo"

# 根据参数执行相应的操作
case "$1" in
    start)
        # 更新符号链接到 Node v12
        sudo ln -sf "$NODE_V12_DIR/node" "$NODE_BIN"
        sudo ln -sf "$NODE_V12_DIR/node" "$NODE_LOCAL_BIN"
        sudo ln -sf "$NODE_V12_DIR/npm" "$NPM_BIN"
        sudo ln -sf "$NODE_V12_DIR/npm" "$NPM_LOCAL_BIN"
        sudo ln -sf "$NODE_V12_DIR/npx" "$NPX_BIN"
        sudo ln -sf "$NODE_V12_DIR/npx" "$NPX_LOCAL_BIN"
        # sudo ln -sf "$NODE_V12_DIR/hexo" "$HEXO_LOCAL_BIN"
        echo "Node, NPM, and NPX links updated to Node v12."
        ;;
    stop)
        # 更新符号链接到 Node v20
        sudo ln -sf "$NODE_V20_DIR/node" "$NODE_BIN"
        sudo ln -sf "$NODE_V20_DIR/node" "$NODE_LOCAL_BIN"
        sudo ln -sf "$NODE_V20_DIR/npm" "$NPM_BIN"
        sudo ln -sf "$NODE_V20_DIR/npm" "$NPM_LOCAL_BIN"
        sudo ln -sf "$NODE_V20_DIR/npx" "$NPX_BIN"
        sudo ln -sf "$NODE_V20_DIR/npx" "$NPX_LOCAL_BIN"
        # sudo rm -rf "$HEXO_LOCAL_BIN"
        echo "Node, NPM, and NPX links updated to Node v20."
        ;;
    *)
        echo "Invalid argument. Usage: $0 start|stop"
        exit 1
        ;;
esac

exit 0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="control-docker-proxy-updown"><a class="header" href="#control-docker-proxy-updown">Control Docker Proxy Up/Down</a></h1>
<pre><code class="language-bash">sudo vim docker_proxy_start_stop.sh
sudo chmod +x docker_proxy_start_stop.sh
</code></pre>
<pre><code class="language-sh">#!/bin/bash

# Define paths
CONF_FILE="/etc/systemd/system/docker.service.d/http-proxy.conf"
BACKUP_CONF_FILE="/etc/systemd/system/docker.service.d/http-proxy.conf.bak"

# Function to enable proxy
enable_proxy() {
    # Check if the current configuration file is already the backup
    if [ -f "$CONF_FILE" ] &amp;&amp; cmp --silent "$CONF_FILE" "$BACKUP_CONF_FILE"; then
        echo "Proxy configuration is already enabled."
    else
        # Move the backup configuration to the active configuration file
        sudo mv "$BACKUP_CONF_FILE" "$CONF_FILE"
        
        # Reload systemd manager configuration
        sudo systemctl daemon-reload
        
        # Restart Docker service
        sudo systemctl restart docker.service
        echo "Proxy configuration enabled."
    fi
}

# Function to disable proxy
disable_proxy() {
    # Check if the current configuration file is the original
    if [ -f "$CONF_FILE" ] &amp;&amp; ! cmp --silent "$CONF_FILE" "$BACKUP_CONF_FILE"; then
        # Move the active configuration file to the backup
        sudo mv "$CONF_FILE" "$BACKUP_CONF_FILE"
        
        # Reload systemd manager configuration
        sudo systemctl daemon-reload
        
        # Restart Docker service
        sudo systemctl restart docker.service
        echo "Proxy configuration disabled."
    else
        echo "Proxy configuration is already disabled."
    fi
}

# Check the command argument
case $1 in
    start)
        enable_proxy
        ;;
    stop)
        disable_proxy
        ;;
    *)
        echo "Usage: $0 {start|stop}"
        exit 1
        ;;
esac

exit 0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="push-docker-images-to-private-registry"><a class="header" href="#push-docker-images-to-private-registry">Push Docker Images to Private Registry</a></h1>
<blockquote>
<p>Tips：When install images, you need open the proxy, but you must close it before push.</p>
</blockquote>
<h3 id="extract-images-name-to-file"><a class="header" href="#extract-images-name-to-file">Extract Images Name to File</a></h3>
<p>From the Helm's values.yaml, extract the images name and tag to images.tmp.</p>
<p><strong>Usage：get_images.sh values-nginx.yaml</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:06
# * Filename      : get_images.sh
# * Description   : Extracts Docker image names and tags from a YAML file and writes them to images.tmp
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;values-nginx.yaml&gt;"
  exit 1
fi

# 从命令行参数获取文件名
input_file="$1"

# 清空或创建 images.tmp 文件
&gt; images.tmp

while read -r line; do
  if [[ $line == *"repository:"* ]]; then
    repository=$(echo $line | cut -d':' -f2 | xargs)
  elif [[ $line == *"tag:"* ]]; then
    tag=$(echo $line | cut -d':' -f2 | xargs)
    # 将结果写入 images.tmp 文件
    echo "$repository:$tag" &gt;&gt; images.tmp
  fi
done &lt; "$input_file"
</code></pre>
<h3 id="pull-docker-images"><a class="header" href="#pull-docker-images">Pull Docker Images</a></h3>
<p>Install all dcoker images in images.tmp file, one by one. If you have else docker images_list file, you can use it instead, just confirm every lines only has one docker image name.</p>
<p><strong>Usage：pull_images.sh images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:34
# * Filename      : pull_images.sh
# * Description   : Pull images from Internet
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;images.tmp&gt;"
  exit 1
fi

# 从命令行参数获取文件名
input_file="$1"

# 读取文件并拉取每个镜像
while read -r image; do
  if [ -n "$image" ]; then
    echo "正在拉取镜像: $image"
    docker pull "$image"
  fi
done &lt; "$input_file"
</code></pre>
<h3 id="rename-docker-images"><a class="header" href="#rename-docker-images">Rename Docker Images</a></h3>
<p>The modified image names will be saved in the <code>new_images.tmp</code> file. And you can modify the <code>private_registry</code> to change the registry you want to push to.</p>
<p><strong>Usage：update_images.sh images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:06
# * Filename      : update_and_tag_images.sh
# * Description   : Updates image paths and tags Docker images based on a specified file
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;images.tmp&gt;"
  exit 1
fi

# 从命令行参数获取文件名
input_file="$1"
output_file="new_images.tmp"
private_registry="192.167.3.18/"

# 创建或清空输出文件
&gt; "$output_file"

# 处理文件内容并执行 docker tag 命令
while IFS= read -r original_image; do
  # 检查行是否为空
  if [[ -n "$original_image" ]]; then
    # 在镜像名称前加上私有仓库地址
    new_image_name="${private_registry}${original_image}"
    
    # 输出正在标记的镜像信息
    echo "正在标记镜像: docker tag $original_image $new_image_name"
    
    # 执行 docker tag 命令
    docker tag "$original_image" "$new_image_name"
    
    # 将新的镜像名称写入输出文件
    echo "$new_image_name" &gt;&gt; "$output_file"
  fi
done &lt; "$input_file"

echo "所有镜像已成功标记并保存到 $output_file"
</code></pre>
<blockquote>
<p>After Tag docker images, you must check the <code>new_images_name.tmp</code>, ensure the image names are correct. And you must confirm about projects created in your private harbor.</p>
</blockquote>
<h3 id="push-images"><a class="header" href="#push-images">Push Images</a></h3>
<p>Push images to a remote registry. This script reads a list of image names from a file named "new_images.tmp", and pushes them to a remote registry.</p>
<p><strong>Usage：push_images.sh new_images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-14 09:01
# * Filename      : push_images.sh
# * Description   : Push Docker images to a registry
# **********************************************************

# 检查是否传入文件名作为参数
if [ "$#" -ne 1 ]; then
  echo "用法: $0 &lt;images.tmp&gt;"
  exit 1
fi

# 从命令行参数获取文件名
images_file="$1"
target_registry="192.167.3.18/library/"

# 遍历images.tmp文件中的每一行
while IFS= read -r line; do
    # 检查行是否为空
    if [ -z "$line" ]; then
        continue
    fi

    # 打印操作信息
    echo "正在推送镜像: $line"

    # 推送镜像
    docker push "$line"

done &lt; "$images_file"

echo "所有指定的镜像已被推送。"
</code></pre>
<h3 id="delete-images-from-local"><a class="header" href="#delete-images-from-local">Delete Images from Local</a></h3>
<p>Delete images from local.</p>
<p><strong>Usage：delete_images.sh new_images.tmp</strong></p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-14 09:02
# * Filename      : delete_images.sh
# * Description   : Delete images that pushed
# **********************************************************

# 检查是否有参数传递
if [ $# -ne 1 ]; then
    echo "Usage: $0 &lt;path-to-file&gt;"
    exit 1
fi

# 指定包含镜像名称的文件路径
images_file="$1"

# 检查文件是否存在
if [ ! -f "$images_file" ]; then
    echo "Error: File '$images_file' not found."
    exit 1
fi

# 逐行读取文件中的镜像名称
while IFS= read -r image; do
    # 删除镜像，忽略不存在的镜像
    if docker rmi "$image" &amp;&gt;/dev/null; then
        echo "Image $image has been deleted."
    else
        echo "Image $image does not exist or could not be deleted."
    fi
done &lt; "$images_file"

echo "All listed images have been processed."
</code></pre>
<h3 id="all-in-one"><a class="header" href="#all-in-one">ALL IN ONE</a></h3>
<p>Merge all the above scripts into one.</p>
<pre><code class="language-bash">#!/bin/bash
# **********************************************************
# * Author        : Burgess Leo
# * Email         : liuxp731@qq.com
# * Create time   : 2024-09-13 16:06
# * Filename      : all_in_one.sh
# * Description   : Pull images
# **********************************************************

# 欢迎信息
echo "欢迎使用 Docker 镜像管理脚本！"
echo ""

# 菜单函数
print_menu() {
  echo "*********************************************************"
  echo "*                                                       *"
  echo "*     1. Get images from Helm yaml files.               *"
  echo "*                                                       *"
  echo "*     2. Pull images from docker hub to local.          *"
  echo "*                                                       *"
  echo "*     3. Docker tag images you need to change.          *"
  echo "*                                                       *"
  echo "*     4. Push images to your private docker registry.   *"
  echo "*                                                       *"
  echo "*     5. Delete images from local.                      *"
  echo "*                                                       *"
  echo "*     6. cat images.tmp.                                *"
  echo "*                                                       *"
  echo "*     7. cat new_images.tmp.                            *"
  echo "*                                                       *"
  echo "*     8. About.                                         *"
  echo "*                                                       *"
  echo "*     0. Exit.                                          *"
  echo "*                                                       *"
  echo "*********************************************************"
}

# 主循环
while true; do
  print_menu
  read -p "请输入功能数字: " choice

  case $choice in
    1)
      read -p "请输入 Helm yaml 文件路径: " yaml_file
      if [ ! -f "$yaml_file" ]; then
        echo "错误: 文件 '$yaml_file' 不存在."
      else
        &gt; images.tmp
        while read -r line; do
          if [[ $line == *"repository:"* ]]; then
            repository=$(echo $line | cut -d':' -f2 | xargs)
          elif [[ $line == *"tag:"* ]]; then
            tag=$(echo $line | cut -d':' -f2 | xargs)
            echo "$repository:$tag" &gt;&gt; images.tmp
          fi
        done &lt; "$yaml_file"
        echo "已从 '$yaml_file' 中提取镜像并保存到 'images.tmp'，由于 Helm yaml 文件可能包含重复的镜像以及失效的 Tag 名称，请手动检查 images.tmp 文件。"
      fi

    ;;
    2)
      read -p "请输入 images.tmp 文件路径 (默认: images.tmp): " images_file
      images_file=${images_file:-images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        while IFS= read -r image || [ -n "$image" ]; do # 修复读取逻辑以处理没有换行的情况
          if [ -n "$image" ]; then
            echo "正在拉取镜像: $image"
            docker pull "$image"
          fi
        done &lt; "$images_file"
        echo "所有镜像已成功拉取."
      fi

    ;;
    3)
      read -p "请输入 images.tmp 文件路径 (默认: images.tmp): " images_file
      images_file=${images_file:-images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        output_file="new_images.tmp"
        header="192.167.3.18/"
        &gt; "$output_file"

        while IFS= read -r original_image || [ -n "$original_image" ]; do # 修复读取逻辑以处理没有换行的情况
          # 在每一行前添加私有镜像仓库地址
          new_image_name="${header}${original_image}"
          echo "正在标记镜像: docker tag $original_image $new_image_name"
          docker tag "$original_image" "$new_image_name"
          echo "$new_image_name" &gt;&gt; "$output_file"
        done &lt; "$images_file"

        if [ -s "$output_file" ]; then # 检查输出文件是否非空
          echo "所有镜像已成功标记并保存到 '$output_file'."
        else
          echo "警告: '$output_file' 文件为空，未能标记任何镜像."
        fi
      fi

    ;;
    4)
      read -p "请输入 new_images.tmp 文件路径 (默认: new_images.tmp): " images_file
      images_file=${images_file:-new_images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        while IFS= read -r line || [ -n "$line" ]; do # 修复读取逻辑以处理没有换行的情况
          if [ -z "$line" ]; then continue; fi
          echo "正在推送镜像: $line"
          docker push "$line"
        done &lt; "$images_file"

        echo "所有指定的镜像已被推送."
      fi

    ;;
    5)
      read -p "请输入包含要删除的镜像名称的文件路径 (默认: new_images.tmp): " images_file
      images_file=${images_file:-new_images.tmp} # 设置默认值

      if [ ! -f "$images_file" ]; then
        echo "错误: 文件 '$images_file' 不存在."
      else
        while IFS= read -r image || [ -n "$image" ]; do # 修复读取逻辑以处理没有换行的情况
          if docker rmi "$image" &amp;&gt;/dev/null; then
            echo "镜像 $image 已被删除."
          else
            echo "镜像 $image 不存在或无法删除."
          fi
        done &lt; "$images_file"

        echo "所有列出的镜像已被处理."
      fi

    ;;
    6)
      cat images.tmp
      
    ;;
    7)
      cat new_images.tmp
      
    ;;
    8)
      # 打印关于信息
      cat &lt;&lt; 'EOF'
        _..._   666       
      .'     '.      _
     /    .-""-\   _/ \
   .-|   /:.   |  |   |
   |  \  |:.   /.-'-./ 
   | .-'-;:__.'    =/  
   .'=  *=|NASA _.='   
  /   _.  |    ;       
 ;-.-'|    \   |       
/   | \    _\  _\      
\__/'._;. \==' ==\     
         \    \   |    
         /    /   /    
         /-._/-._/     
  lxp    \   `\  \     
          `-._/._/     
EOF

    ;;
    0)
      echo "退出程序。再见！"
      exit 0

    ;;
    *)
      echo "无效的选择，请重新输入."
    ;;
  esac

  # 打印分隔行以提高可读性，并重新显示菜单
  printf "\n\n\n"

done
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="disable-hibernate-when-close-laptop"><a class="header" href="#disable-hibernate-when-close-laptop">Disable Hibernate When Close Laptop</a></h1>
<h4 id="edit-conf-file-1"><a class="header" href="#edit-conf-file-1">Edit Conf File</a></h4>
<pre><code class="language-bash">sudo gedit /etc/systemd/logind.conf
</code></pre>
<h4 id="modify-line"><a class="header" href="#modify-line">Modify Line</a></h4>
<pre><code class="language-bash">HandleLidSwitch=ignore
</code></pre>
<h4 id="restart-service"><a class="header" href="#restart-service">Restart Service</a></h4>
<pre><code class="language-bash">sudo systemctl restart systemd-logind
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="create-windterm-desktop-entry"><a class="header" href="#create-windterm-desktop-entry">Create WindTerm Desktop Entry</a></h1>
<pre><code class="language-ini">[Desktop Entry]
Name=WindTerm
Comment=A professional cross-platform SSH/Sftp/Shell/Telnet/Serial terminal
GenericName=Connect Client
Exec=/home/knight/windTerm/WindTerm_2.6.1/WindTerm
Type=Application
Icon=/home/knight/windTerm/WindTerm_2.6.1/windterm.png
StartupNotify=false
StartupWMClass=Code
Categories=Application;Development
Actions=new-empty-window
Keywords=windterm

[Desktop Action new-empty-window]
Name=New Empty Window
Exec=/home/knight/windTerm/WindTerm_2.6.1/WindTerm
Icon=/home/knight/windTerm/WindTerm_2.6.1/windterm.png
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="使用-frp"><a class="header" href="#使用-frp">使用 frp</a></h1>
<h4 id="project-official-website"><a class="header" href="#project-official-website">Project Official Website</a></h4>
<p><a href="https://github.com/fatedier/frp">https://github.com/fatedier/frp</a></p>
<p><a href="https://gofrp.org/zh-cn/">中文文档</a></p>
<h3 id="ssh-service"><a class="header" href="#ssh-service">SSH Service</a></h3>
<h4 id="the-server-configuration"><a class="header" href="#the-server-configuration">The server configuration</a></h4>
<pre><code class="language-bash">vim frps.toml
</code></pre>
<pre><code class="language-bash">bindPort = 5432  # frp 建立通讯的端口
auth.token = "123456"
</code></pre>
<h4 id="the-client-configuration"><a class="header" href="#the-client-configuration">The Client configuration</a></h4>
<pre><code class="language-bash">vim frpc.toml
</code></pre>
<pre><code class="language-bash">serverAddr = "123.00.00.01"
serverPort = 5432   # frp 建立通讯的端口
auth.token = "123456"

[[proxies]]
name = "ssh"
type = "tcp"
localIP = "127.0.0.1"
localPort = 22
remotePort = 10086   # frp 映射的端口，VPS需要打开的端口
</code></pre>
<h3 id="ftp-service"><a class="header" href="#ftp-service">FTP Service</a></h3>
<h4 id="the-server-configuration-1"><a class="header" href="#the-server-configuration-1">The Server configuration</a></h4>
<pre><code class="language-bash">vim frps.toml
</code></pre>
<pre><code class="language-bash">bindPort = 5432
auth.token = "123456"
</code></pre>
<h4 id="the-client-configuration-1"><a class="header" href="#the-client-configuration-1">The Client configuration</a></h4>
<pre><code class="language-bash">vim frpc.toml
</code></pre>
<pre><code class="language-bash">serverAddr = "123.00.00.01"
serverPort = 5432
auth.token = "123456"

[[proxies]]
name = "test_static_file"
type = "tcp"
localPort = 21
remotePort = 10086

[proxies.plugin]
type = "static_file"

# 本地文件目录，对外提供访问
localPath = "/your/local/path"

# URL 中的前缀，将被去除，保留的内容即为要访问的文件路径
stripPrefix = "static"
httpUser = "user"
httpPassword = "password"
</code></pre>
<h4 id="systemctl-configuration"><a class="header" href="#systemctl-configuration">systemctl Configuration</a></h4>
<ul>
<li>frps | Server configuration</li>
</ul>
<pre><code class="language-bash">sudo vim /etc/systemd/system/frps.service
</code></pre>
<pre><code class="language-ini">[Unit]
# 服务名称，可自定义
Description = frp server
After = network.target syslog.target
Wants = network.target
[Service]
Type = simple
# 启动frps的命令，需修改为您的frps的安装路径
ExecStart = /root/frp/frps -c /root/frp/config.toml
[Install]
WantedBy = multi-user.target
</code></pre>
<p>reload daemon and start service</p>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl enable --now frps
</code></pre>
<ul>
<li>frpc | Client configuration</li>
</ul>
<pre><code class="language-bash">sudo vim /etc/systemd/system/frpc.service
</code></pre>
<pre><code class="language-ini">[Unit]
Description=FRPC Client Service
After=network.target

[Service]
User=knight
Group=knight
Type=simple
ExecStart=/home/knight/frp/frpc -c /home/knight/frp/config.toml
Restart=on-failure
RestartSec=5s
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=frpc

[Install]
WantedBy=multi-user.target
</code></pre>
<p>reload daemon and start service</p>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl enable --now frpc
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="asciiquarium-command-install"><a class="header" href="#asciiquarium-command-install">Asciiquarium Command Install</a></h1>
<h4 id="ubuntu"><a class="header" href="#ubuntu">Ubuntu</a></h4>
<pre><code class="language-bash">sudo apt-get install -y perl libcurses-perl wget
wget http://search.cpan.org/CPAN/authors/id/K/KB/KBAUCOM/Term-Animation-2.4.tar.gz
wget http://www.robobunny.com/projects/asciiquarium/asciiquarium.tar.gz
tar -xf Term-Animation-2.4.tar.gz
tar -xf asciiquarium.tar.gz
cd Term-Animation-2.4/ &amp;&amp; perl Makefile.PL &amp;&amp; make &amp;&amp; sudo make install
cd ../asciiquarium_1.1/
cp asciiquarium /usr/local/bin
sudo chmod +x /usr/local/bin/asciiquarium
asciiquarium
</code></pre>
<h4 id="centos"><a class="header" href="#centos">Centos</a></h4>
<pre><code class="language-bash">cd /opt
yum install -y wget
wget http://search.cpan.org/CPAN/authors/id/K/KB/KBAUCOM/Term-Animation-2.4.tar.gz
tar xf Term-Animation-2.4.tar.gz
yum install perl-Curses.x86_64  -y
yum install perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker  -y
cd /opt/Term-Animation-2.4/  &amp;&amp; perl Makefile.PL
make
make install
cd /opt
wget http://www.robobunny.com/projects/asciiquarium/asciiquarium.tar.gz
tar -zxvf asciiquarium.tar.gz
cd asciiquarium_1.1/
cp asciiquarium /usr/local/bin
chmod +x /usr/local/bin/asciiquarium
asciiquarium
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kns-locking-namespace"><a class="header" href="#kns-locking-namespace">kns Locking Namespace</a></h1>
<h4 id="install-fzf"><a class="header" href="#install-fzf">Install fzf</a></h4>
<pre><code class="language-bash">sudo apt install fzf
</code></pre>
<h4 id="edit-kns-script"><a class="header" href="#edit-kns-script">Edit kns Script</a></h4>
<pre><code class="language-bash">vim kns
</code></pre>
<pre><code class="language-shell">#!/bin/sh
# quick Kubernetes Namespace Switcher
# ISC Blendle, 2017

set -eu

if [ ! -x "$(which kubectl 2&gt;/dev/null)" ]; then
  echo "please install: kubectl (https://kubernetes.io/docs/tasks/kubectl/install/)" &gt;&amp;2
  exit 1
fi
if [ ! -x "$(which fzf 2&gt;/dev/null)" ]; then
  echo "please install: fzf (https://github.com/junegunn/fzf)" &gt;&amp;2
  exit 1
fi

current="$(kubectl config current-context)"
namespace="$(kubectl config view -o jsonpath="{.contexts[?(@.name == '${current}')].context.namespace}")"
if [ -z "$namespace" ]; then
  namespace="default"
fi

selected=$( (kubectl get namespaces -o=jsonpath="{.items[?(@.metadata.name!='$namespace')].metadata.name}" | xargs -n 1; echo $namespace ) | fzf -0 -1 --tac -q "${1:-""}" --prompt "$current&gt; ")
if [ -n "$selected" ]; then
  kubectl config set-context "$current" "--namespace=$selected" &gt;/dev/null
  echo "Set context namespace to \"$selected\""
fi
</code></pre>
<h4 id="add-exec-permission-1"><a class="header" href="#add-exec-permission-1">Add Exec Permission</a></h4>
<pre><code class="language-bash">chmod +x kns
sudo mv kns /usr/local/bin/kns
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vs-code-control-remote-hosts"><a class="header" href="#vs-code-control-remote-hosts">VS-Code Control Remote Hosts</a></h1>
<h4 id="configure"><a class="header" href="#configure">Configure</a></h4>
<pre><code class="language-bash">ssh-keygen -t rsa

ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.1.1
</code></pre>
<h4 id="add-ssh-config"><a class="header" href="#add-ssh-config">Add ssh config</a></h4>
<pre><code class="language-bash">vim ~/.ssh/config

# 添加以下内容
Host ali
  HostName 192.168.1.1
  User root
  IdentityFile ~/.ssh/id_rsa
  Port 22
</code></pre>
<h4 id="install-vs-code-plugin"><a class="header" href="#install-vs-code-plugin">Install VS-Code Plugin</a></h4>
<p>点击VSCode左下角图标，形似“&gt;&lt;”，点击会自动安装。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ollama-service-discovery"><a class="header" href="#ollama-service-discovery">Ollama Service Discovery</a></h1>
<h4 id="editing-the-systemd-service-file"><a class="header" href="#editing-the-systemd-service-file">Editing the systemd service file</a></h4>
<pre><code class="language-bash">sudo vim /etc/systemd/system/ollama.service
</code></pre>
<h4 id="add-env-under-service-item"><a class="header" href="#add-env-under-service-item">Add ENV under [Service] Item</a></h4>
<pre><code class="language-ini">[Service]
Environment="OLLAMA_HOST=0.0.0.0"
</code></pre>
<h4 id="reload-and-restart"><a class="header" href="#reload-and-restart">Reload and Restart</a></h4>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl restart ollama
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="some-funny-docker-projects"><a class="header" href="#some-funny-docker-projects">Some Funny Docker Projects</a></h1>
<p>Collected some funny docker projects here. If you want to try, confirm you install docker and docker-compose first.</p>
<ul>
<li>
<p><a href="./openweb-ui.html">OpenWeb-UI</a></p>
<p>You can chat with your local ollama models in browser. It's provide history management and session management.</p>
</li>
<li>
<p><a href="./yesplaymusic.html">YesplayMusic</a></p>
<p>A music player with a beautiful UI. You can deploy it on your own server.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="openweb-ui"><a class="header" href="#openweb-ui">OpenWeb-UI</a></h1>
<h4 id="open-webui-official-website"><a class="header" href="#open-webui-official-website">open-webui Official Website</a></h4>
<p><a href="https://docs.openwebui.com/">https://docs.openwebui.com/</a></p>
<h4 id="docker-deployment"><a class="header" href="#docker-deployment">Docker Deployment</a></h4>
<pre><code class="language-bash">version: '3'

services:
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: open-webui
    ports:
      - "3000:8080"
    volumes:
      - open-webui:/app/backend/data
#    restart: always
    extra_hosts:
      - "host.docker.internal:host-gateway"

volumes:
  open-webui:
</code></pre>
<blockquote>
<p>Docker deploy open-webui needs to configure <a href="./ollama_services_found.html">ollama Service Discovery</a>, or ollama can't discern local models.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="yesplaymusic"><a class="header" href="#yesplaymusic">Yesplaymusic</a></h1>
<h4 id="official-website-1"><a class="header" href="#official-website-1">Official Website</a></h4>
<p><a href="https://github.com/qier222/YesPlayMusic">https://github.com/qier222/YesPlayMusic</a></p>
<h4 id="docker-deployment-1"><a class="header" href="#docker-deployment-1">Docker Deployment</a></h4>
<pre><code class="language-yaml">version: '3.9'

services:
  yesplaymusic:
    image: fogforest/yesplaymusic
    container_name: yesplaymusic
    restart: always
    ports:
      - "7900:80"
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
