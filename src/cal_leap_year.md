# Leap Year

## 为什么要设置闰年

```yaml
四年一闰
百年不闰
四百年又闰
```

$$
回归年 = 365 天 5 小时 48 分 46 秒 \approx 365.2422(天)
$$

如果不加以调整，那么经过800年，差距为194天，夏天可以过新年：

$$
0.2422 \times 800 \ \approx 194(天)
$$

## 如何吸收误差

把这些差距转化为以天为单位：

$$
5 小时 48 分 46 秒 = a = \frac{10463}{43200} = \frac{1}{4 + \frac{1}{7 + \frac{1}{1 + \frac{1}{3 + \frac{1}{5 + \frac{1}{64}}}}}} \approx 0.242199074(天)
$$

由`a1`可知每4年加一天比较好一些, 故`四年一闰`。

$$
a_1 = \frac{1}{4} = 0.25(天)
$$

由`a2`可知每49年加7天比较好一些。 

$$
a_2 = \frac{1}{4 + \frac{1}{7}}= \frac{7}{49} \approx 0.2413793(天)
$$

由`a3`可知每33年加8天比较好一些，那么99年就是24天，故百年不闰。

$$
a_3 = \frac{1}{4 + \frac{1}{7 + \frac{1}{1}}} = \frac{8}{33} \approx 0.2424242(天)
$$

由`a`的真实值可知，每43200年应该加10463天，但是按照100年加24天的逻辑来算，43200年才加了10368天。

$$
\frac{24}{100} \times 43200 = 10368(天)
$$

与真实值间差距为95天。

$$
10463 - 10368 = 95(天)
$$

因为大约40000年少加100天，所以，大约每400年又加1天，故四百年又闰。

按照现在及的计算逻辑，在这43200年中，一共加的天数是：

$$
10368 + \frac{1}{400} \times 43200 = 10476(天)
$$

比实际多加了

$$
10476 - 10463 = 13(天)
$$

解决办法是每3323年减去一个闰年。

$$
\frac{43200}{13} \approx 3323.0769(年)
$$